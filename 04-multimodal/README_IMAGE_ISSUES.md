# Проблемы с обработкой изображений в боте

## Текущее состояние

Бот успешно работает с текстовыми транзакциями, но возникают проблемы с обработкой изображений через OpenRouter API.

## Проблемы с моделями для изображений

### Протестированные модели и ошибки:

1. **qwen/qwen2.5-vl-32b-instruct** - Ошибка 402 (недостаточно кредитов)
2. **qwen/qwen2.5-vl-32b-instruct:free** - Ошибка 429 (ограничение частоты запросов)
3. **google/gemini-flash-1.5-8b:free** - Ошибка 404 (модель не найдена)
4. **qwen/qwen2.5-vl-7b-instruct:free** - Ошибка 400 (неверный ID модели)
5. **qwen/qwen2.5-vl-7b-instruct** - Ошибка 400 (неверный ID модели)
6. **openai/gpt-4o-mini** - Ошибка 402 (недостаточно кредитов)
7. **google/gemini-flash-1.5** - Ошибка 404 (модель не найдена)

## Рабочие функции

✅ **Текстовые транзакции** - работают отлично с моделью `openai/gpt-oss-20b:free`
- Извлечение транзакций из текстовых сообщений
- Учет доходов и расходов
- Команды /balance, /transactions, /start

❌ **Обработка изображений** - временно недоступна
- Распознавание чеков
- Извлечение транзакций из скриншотов

## Решения

### Краткосрочные:
- Использовать текстовые описания транзакций
- Пример: "Потратил 500 рублей на продукты в Пятерочке"

### Долгосрочные:
1. **Пополнить баланс на OpenRouter** для использования платных моделей
2. **Настроить локальную модель** через Ollama
3. **Использовать другой API провайдер** с поддержкой изображений

## Конфигурация Ollama (альтернатива)

В файле `.env` закомментирована конфигурация для локального Ollama:

```env
#OPENAI_API_KEY=ollama
#OPENAI_BASE_URL=http://localhost:11434/v1
#MODEL_TEXT=gpt-oss:20b
#MODEL_IMAGE=qwen3-vl:8b-instruct
```

Для использования Ollama:
1. Установить Ollama локально
2. Скачать модель: `ollama pull qwen3-vl:8b-instruct`
3. Раскомментировать настройки в `.env`
4. Перезапустить бота

## Текущая конфигурация

- **Модель для текста**: `openai/gpt-oss-20b:free`
- **Модель для изображений**: `google/gemini-flash-1.5` (не работает)
- **API провайдер**: OpenRouter
- **Баланс**: Недостаточно для платных моделей

## Рекомендации

1. Продолжать использовать текстовые транзакции
2. Рассмотреть настройку локального Ollama для обработки изображений
3. При необходимости обработки изображений - пополнить баланс на OpenRouter